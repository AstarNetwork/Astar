<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Dapps Staking Pallet"><title>pallet_dapps_staking - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-ba5701c5741a7b69.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="pallet_dapps_staking" data-themes="" data-resource-suffix="" data-rustdoc-version="1.70.0 (90c541806 2023-05-31)" data-search-js="search-e077946657036a58.js" data-settings-js="settings-298e1ea74db45b39.js" data-settings-css="settings-7bfb4c59cc6bc502.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ></div><script src="../static.files/storage-62ce34ea385b278a.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-f61008743c98d196.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../pallet_dapps_staking/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../pallet_dapps_staking/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Crate pallet_dapps_staking</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 3.10.0</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#types">Type Definitions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">pallet_dapps_staking</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/pallet_dapps_staking/lib.rs.html#19-569">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="dapps-staking-pallet"><a href="#dapps-staking-pallet">Dapps Staking Pallet</a></h2>
<ul>
<li><a href="pallet/pallet/trait.Config.html" title="trait pallet_dapps_staking::pallet::pallet::Config"><code>Config</code></a></li>
</ul>
<h3 id="overview"><a href="#overview">Overview</a></h3>
<p>Pallet that implements dapps staking protocol.</p>
<p>Dapps staking protocol is a completely decentralized &amp; innovative approach to reward developers for their contribution to the Astar/Shiden ecosystem.
Stakers can pick a dapp and nominate it for rewards by locking their tokens. Dapps will be rewarded, based on the proportion of locked tokens.
Stakers are also rewarded, based on the total amount they’ve locked (invariant of the dapp they staked on).</p>
<p>Rewards are accumulated throughout an <strong>era</strong> and when <strong>era</strong> finishes, both stakers and developers can claim their rewards for that era.
This is a continous process. Rewards can be claimed even for eras which are older than the last one (no limit at the moment).</p>
<p>Reward claiming isn’t automated since the whole process is done <strong>on-chain</strong> and is fully decentralized.
Both stakers and developers are responsible for claiming their own rewards.</p>
<h3 id="interface"><a href="#interface">Interface</a></h3><h4 id="dispatchable-function"><a href="#dispatchable-function">Dispatchable Function</a></h4>
<ul>
<li><code>register</code> - used to register a new contract for dapps staking</li>
<li><code>unregister</code> - used to unregister contract from dapps staking, making it ineligible for receiveing future rewards</li>
<li><code>withdraw_from_unregistered</code> - used by stakers to withdraw their stake from an unregistered contract (no unbonding period)</li>
<li><code>bond_and_stake</code> - basic call for nominating a dapp and locking stakers tokens into dapps staking</li>
<li><code>unbond_and_unstake</code> - removes nomination from the contract, starting the unbonding process for the unstaked funds</li>
<li><code>withdraw_unbonded</code> - withdraws all funds that have completed the unbonding period</li>
<li><code>nomination_transfer</code> - transfer nomination from one contract to another contract (avoids unbonding period)</li>
<li><code>claim_staker</code> - claims staker reward for a single era</li>
<li><code>claim_dapp</code> - claims dapp rewards for the specified era</li>
<li><code>force_new_era</code> - forces new era on the start of the next block</li>
<li><code>maintenance_mode</code> - enables or disables pallet maintenance mode</li>
<li><code>set_reward_destination</code> - sets reward destination for the staker rewards</li>
<li><code>set_contract_stake_info</code> - root-only call to set storage value (used for fixing corrupted data)</li>
<li><code>burn_stale_reward</code> - root-only call to burn unclaimed, stale rewards from unregistered contracts</li>
</ul>
<p>User is encouraged to refer to specific function implementations for more comprehensive documentation.</p>
<h4 id="other"><a href="#other">Other</a></h4>
<ul>
<li><code>on_initialize</code> - part of <code>Hooks</code> trait, it’s important to call this per block since it handles reward snapshots and era advancement.</li>
<li><code>account_id</code> - returns pallet’s account Id</li>
<li><code>ensure_pallet_enabled</code> - checks whether pallet is in maintenance mode or not and returns appropriate <code>Result</code></li>
<li><code>rewards</code> - used to deposit staker and dapps rewards into dApps staking reward pool</li>
<li><code>tvl</code> - total value locked in dApps staking (might differ from total staked value)</li>
</ul>
</div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.WeightInfo"><code>pub use weights::<a class="trait" href="weights/trait.WeightInfo.html" title="trait pallet_dapps_staking::weights::WeightInfo">WeightInfo</a>;</code></div></li><li><div class="item-name"><code>pub use pallet::<a class="mod" href="pallet/pallet/index.html" title="mod pallet_dapps_staking::pallet::pallet">pallet</a>::*;</code></div></li></ul><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="pallet/index.html" title="mod pallet_dapps_staking::pallet">pallet</a></div><div class="desc docblock-short">Dapps staking FRAME Pallet.</div></li><li><div class="item-name"><a class="mod" href="weights/index.html" title="mod pallet_dapps_staking::weights">weights</a></div><div class="desc docblock-short">Autogenerated weights for pallet_dapps_staking</div></li></ul><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.AccountLedger.html" title="struct pallet_dapps_staking::AccountLedger">AccountLedger</a></div><div class="desc docblock-short">Contains information about account’s locked &amp; unbonding balances.</div></li><li><div class="item-name"><a class="struct" href="struct.ContractStakeInfo.html" title="struct pallet_dapps_staking::ContractStakeInfo">ContractStakeInfo</a></div><div class="desc docblock-short">Used to split total EraPayout among contracts.
Each tuple (contract, era) has this structure.
This will be used to reward contracts developer and his stakers.</div></li><li><div class="item-name"><a class="struct" href="struct.DAppInfo.html" title="struct pallet_dapps_staking::DAppInfo">DAppInfo</a></div></li><li><div class="item-name"><a class="struct" href="struct.EraInfo.html" title="struct pallet_dapps_staking::EraInfo">EraInfo</a></div><div class="desc docblock-short">A record for total rewards and total amount staked for an era</div></li><li><div class="item-name"><a class="struct" href="struct.EraStake.html" title="struct pallet_dapps_staking::EraStake">EraStake</a></div><div class="desc docblock-short">Used to represent how much was staked in a particular era.
E.g. <code>{staked: 1000, era: 5}</code> means that in era <code>5</code>, staked amount was 1000.</div></li><li><div class="item-name"><a class="struct" href="struct.RewardInfo.html" title="struct pallet_dapps_staking::RewardInfo">RewardInfo</a></div><div class="desc docblock-short">A record of rewards allocated for stakers and dapps</div></li><li><div class="item-name"><a class="struct" href="struct.StakerInfo.html" title="struct pallet_dapps_staking::StakerInfo">StakerInfo</a></div><div class="desc docblock-short">Used to provide a compact and bounded storage for information about stakes in unclaimed eras.</div></li><li><div class="item-name"><a class="struct" href="struct.UnbondingInfo.html" title="struct pallet_dapps_staking::UnbondingInfo">UnbondingInfo</a></div><div class="desc docblock-short">Contains unlocking chunks.
This is a convenience struct that provides various utility methods to help with unbonding handling.</div></li><li><div class="item-name"><a class="struct" href="struct.UnlockingChunk.html" title="struct pallet_dapps_staking::UnlockingChunk">UnlockingChunk</a></div><div class="desc docblock-short">Represents an balance amount undergoing the unbonding process.
Since unbonding takes time, it’s important to keep track of when and how much was unbonded.</div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.DAppState.html" title="enum pallet_dapps_staking::DAppState">DAppState</a></div><div class="desc docblock-short">DApp State descriptor</div></li><li><div class="item-name"><a class="enum" href="enum.Forcing.html" title="enum pallet_dapps_staking::Forcing">Forcing</a></div><div class="desc docblock-short">Mode of era-forcing.</div></li><li><div class="item-name"><a class="enum" href="enum.RewardDestination.html" title="enum pallet_dapps_staking::RewardDestination">RewardDestination</a></div><div class="desc docblock-short">Instruction on how to handle reward payout for stakers.
In order to make staking more competitive, majority of stakers will want to
automatically restake anything they earn.</div></li><li><div class="item-name"><a class="enum" href="enum.Version.html" title="enum pallet_dapps_staking::Version">Version</a></div><div class="desc docblock-short">Storage value representing the current Dapps staking pallet storage version.
Used by <code>on_runtime_upgrade</code> to determine whether a storage migration is needed or not.</div></li></ul><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.EraIndex.html" title="type pallet_dapps_staking::EraIndex">EraIndex</a></div><div class="desc docblock-short">Counter for the number of eras that have passed.</div></li></ul></section></div></main></body></html>