<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Price Aggregator Pallet"><title>pallet_price_aggregator - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-1a91846b.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="pallet_price_aggregator" data-themes="" data-resource-suffix="" data-rustdoc-version="1.88.0 (6b00bc388 2025-06-23)" data-channel="1.88.0" data-search-js="search-f7877310.js" data-settings-js="settings-5514c975.js" ><script src="../static.files/storage-4e99c027.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-7ef8a74a.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../pallet_price_aggregator/index.html">pallet_<wbr>price_<wbr>aggregator</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#price-aggregator-pallet" title="Price Aggregator Pallet">Price Aggregator Pallet</a><ul><li><a href="#overview" title="Overview">Overview</a></li><li><a href="#solution" title="Solution">Solution</a></li></ul></li></ul><h3><a href="#reexports">Crate Items</a></h3><ul class="block"><li><a href="#reexports" title="Re-exports">Re-exports</a></li><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#traits" title="Traits">Traits</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>pallet_price_aggregator</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/pallet_price_aggregator/lib.rs.html#19-473">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="price-aggregator-pallet"><a class="doc-anchor" href="#price-aggregator-pallet">§</a>Price Aggregator Pallet</h2><h3 id="overview"><a class="doc-anchor" href="#overview">§</a>Overview</h3>
<p>Purpose of this pallet is to aggregate price data over some time, and then calculate the moving average.</p>
<h3 id="solution"><a class="doc-anchor" href="#solution">§</a>Solution</h3>
<p>The overall solution is broken down into several steps that occur over the course of various time periods.</p>
<h4 id="block-aggregation"><a class="doc-anchor" href="#block-aggregation">§</a>Block Aggregation</h4>
<p>During each block, the native currency price data is accumulated. This is done ‘outside’ the pallet, and it’s only expected
that ‘something’ will push this data to the price aggregator pallet. The pallet itself doesn’t care about the source of the data, nor who submitted it.</p>
<p>At the end of each block, accumulated data is processed according to the specified algorithm (e.g. can be average, median, or something else).
In case processing was successful, the result is stored in the intermediate value aggregator.
In case processing fails, value is simply ignored.</p>
<h4 id="intermediate-value-aggregation"><a class="doc-anchor" href="#intermediate-value-aggregation">§</a>Intermediate Value Aggregation</h4>
<p>After a predetermined amount of time (blocks) has passed, the average value is calculated from the intermediate value aggregator.
In case it’s a valid value (non-zero), it’s pushed into the circular buffer used to calculate the moving average.
In case of an error, the value is simply ignored.</p>
<h4 id="moving-average-calculation"><a class="doc-anchor" href="#moving-average-calculation">§</a>Moving Average Calculation</h4>
<p>The moving average is calculated from the circular buffer, and is used to provide the ‘average’ price of the native currency, over some time period.
It’s important to note that the moving average is not a ‘real-time’ value, but rather a ‘lagging’ indicator.</p>
</div></details><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">§</a></h2><dl class="item-table reexports"><dt id="reexport.WeightInfo"><code>pub use weights::<a class="trait" href="weights/trait.WeightInfo.html" title="trait pallet_price_aggregator::weights::WeightInfo">WeightInfo</a>;</code></dt><dt><code>pub use <a class="mod" href="pallet/index.html" title="mod pallet_price_aggregator::pallet">pallet</a>::*;</code></dt></dl><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><dl class="item-table"><dt><a class="mod" href="pallet/index.html" title="mod pallet_price_aggregator::pallet">pallet</a></dt><dd>The <code>pallet</code> module in each FRAME pallet hosts the most important items needed
to construct this pallet.</dd><dt><a class="mod" href="weights/index.html" title="mod pallet_price_aggregator::weights">weights</a></dt><dd>Autogenerated weights for pallet_price_aggregator</dd></dl><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.AverageBlockValue.html" title="struct pallet_price_aggregator::AverageBlockValue">Average<wbr>Block<wbr>Value</a></dt><dd>Used to calculate the simple average of the accumulated values.</dd><dt><a class="struct" href="struct.CircularBuffer.html" title="struct pallet_price_aggregator::CircularBuffer">Circular<wbr>Buffer</a></dt><dd>Used to store the aggregated intermediate values into a circular buffer.</dd><dt><a class="struct" href="struct.MedianBlockValue.html" title="struct pallet_price_aggregator::MedianBlockValue">Median<wbr>Block<wbr>Value</a></dt><dd>Used to calculate the median of the accumulated values.</dd><dt><a class="struct" href="struct.ValueAggregator.html" title="struct pallet_price_aggregator::ValueAggregator">Value<wbr>Aggregator</a></dt><dd>Used to aggregate the accumulated values over some time period.</dd></dl><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><dl class="item-table"><dt><a class="trait" href="trait.ProcessBlockValues.html" title="trait pallet_price_aggregator::ProcessBlockValues">Process<wbr>Block<wbr>Values</a></dt><dd>Trait for processing accumulated currency values within a single block.</dd></dl></section></div></main></body></html>