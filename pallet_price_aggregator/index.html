<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Price Aggregator Pallet"><title>pallet_price_aggregator - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-c5d6553a23f1e5a6.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="pallet_price_aggregator" data-themes="" data-resource-suffix="" data-rustdoc-version="1.81.0 (eeb90cda1 2024-09-04)" data-channel="1.81.0" data-search-js="search-d234aafac6c221dd.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-d2fab2bf619172d3.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../pallet_price_aggregator/index.html">pallet_price_aggregator</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li></ul></section></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">pallet_price_aggregator</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../src/pallet_price_aggregator/lib.rs.html#19-476">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="price-aggregator-pallet"><a class="doc-anchor" href="#price-aggregator-pallet">§</a>Price Aggregator Pallet</h2><h3 id="overview"><a class="doc-anchor" href="#overview">§</a>Overview</h3>
<p>Purpose of this pallet is to aggregate price data over some time, and then calculate the moving average.</p>
<h3 id="solution"><a class="doc-anchor" href="#solution">§</a>Solution</h3>
<p>The overall solution is broken down into several steps that occur over the course of various time periods.</p>
<h4 id="block-aggregation"><a class="doc-anchor" href="#block-aggregation">§</a>Block Aggregation</h4>
<p>During each block, the native currency price data is accumulated. This is done ‘outside’ the pallet, and it’s only expected
that ‘something’ will push this data to the price aggregator pallet. The pallet itself doesn’t care about the source of the data, nor who submitted it.</p>
<p>At the end of each block, accumulated data is processed according to the specified algorithm (e.g. can be average, median, or something else).
In case processing was successful, the result is stored in the intermediate value aggregator.
In case processing fails, value is simply ignored.</p>
<h4 id="intermediate-value-aggregation"><a class="doc-anchor" href="#intermediate-value-aggregation">§</a>Intermediate Value Aggregation</h4>
<p>After a predetermined amount of time (blocks) has passed, the average value is calculated from the intermediate value aggregator.
In case it’s a valid value (non-zero), it’s pushed into the circular buffer used to calculate the moving average.
In case of an error, the value is simply ignored.</p>
<h4 id="moving-average-calculation"><a class="doc-anchor" href="#moving-average-calculation">§</a>Moving Average Calculation</h4>
<p>The moving average is calculated from the circular buffer, and is used to provide the ‘average’ price of the native currency, over some time period.
It’s important to note that the moving average is not a ‘real-time’ value, but rather a ‘lagging’ indicator.</p>
</div></details><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.WeightInfo"><code>pub use weights::<a class="trait" href="weights/trait.WeightInfo.html" title="trait pallet_price_aggregator::weights::WeightInfo">WeightInfo</a>;</code></div></li><li><div class="item-name"><code>pub use <a class="mod" href="pallet/index.html" title="mod pallet_price_aggregator::pallet">pallet</a>::*;</code></div></li></ul><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="pallet/index.html" title="mod pallet_price_aggregator::pallet">pallet</a></div><div class="desc docblock-short">The <code>pallet</code> module in each FRAME pallet hosts the most important items needed
to construct this pallet.</div></li><li><div class="item-name"><a class="mod" href="weights/index.html" title="mod pallet_price_aggregator::weights">weights</a></div><div class="desc docblock-short">Autogenerated weights for pallet_price_aggregator</div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.AverageBlockValue.html" title="struct pallet_price_aggregator::AverageBlockValue">AverageBlockValue</a></div><div class="desc docblock-short">Used to calculate the simple average of the accumulated values.</div></li><li><div class="item-name"><a class="struct" href="struct.CircularBuffer.html" title="struct pallet_price_aggregator::CircularBuffer">CircularBuffer</a></div><div class="desc docblock-short">Used to store the aggregated intermediate values into a circular buffer.</div></li><li><div class="item-name"><a class="struct" href="struct.MedianBlockValue.html" title="struct pallet_price_aggregator::MedianBlockValue">MedianBlockValue</a></div><div class="desc docblock-short">Used to calculate the median of the accumulated values.</div></li><li><div class="item-name"><a class="struct" href="struct.ValueAggregator.html" title="struct pallet_price_aggregator::ValueAggregator">ValueAggregator</a></div><div class="desc docblock-short">Used to aggregate the accumulated values over some time period.</div></li></ul><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.ProcessBlockValues.html" title="trait pallet_price_aggregator::ProcessBlockValues">ProcessBlockValues</a></div><div class="desc docblock-short">Trait for processing accumulated currency values within a single block.</div></li></ul></section></div></main></body></html>